{"ast":null,"code":"import React from'react';import{useAuth}from'../contexts/AuthContext';import{useQuery}from'@tanstack/react-query';import{apiService}from'../services/api';import{LoadingSpinner}from'../components/LoadingSpinner';import{ErrorMessage}from'../components/ErrorMessage';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const MyBookingsPage=()=>{const{user}=useAuth();const navigate=useNavigate();const{data:bookings,isLoading,error}=useQuery({queryKey:['my-bookings',user===null||user===void 0?void 0:user.id],queryFn:()=>user?apiService.getBookingsByCustomer(user.id):Promise.resolve([]),enabled:!!(user!==null&&user!==void 0&&user.id),staleTime:2*60*1000});if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(ErrorMessage,{message:\"Please log in to view your bookings.\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-6\",children:\"My Bookings\"}),isLoading?/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\",className:\"py-8\"}):error?/*#__PURE__*/_jsx(ErrorMessage,{message:\"Failed to load bookings. Please try again.\"}):bookings&&bookings.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:bookings.map(booking=>{var _booking$slot,_booking$slot$provide,_booking$slot2,_booking$slot3;return/*#__PURE__*/_jsxs(\"div\",{className:\"card flex flex-col md:flex-row md:items-center md:justify-between p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-gray-900 mb-1\",children:[((_booking$slot=booking.slot)===null||_booking$slot===void 0?void 0:(_booking$slot$provide=_booking$slot.provider)===null||_booking$slot$provide===void 0?void 0:_booking$slot$provide.name)||'Provider',\" \\u2014 \",new Date(((_booking$slot2=booking.slot)===null||_booking$slot2===void 0?void 0:_booking$slot2.start_time)||'').toLocaleDateString(),\" \",new Date(((_booking$slot3=booking.slot)===null||_booking$slot3===void 0?void 0:_booking$slot3.start_time)||'').toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"Status: \",/*#__PURE__*/_jsx(\"span\",{className:\"capitalize\",children:booking.status})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary mt-2 md:mt-0\",onClick:()=>navigate(`/booking/${booking.id}`),children:\"Review\"})]},booking.id);})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"You have no bookings yet.\"})]})});};","map":{"version":3,"names":["React","useAuth","useQuery","apiService","LoadingSpinner","ErrorMessage","useNavigate","jsx","_jsx","jsxs","_jsxs","MyBookingsPage","user","navigate","data","bookings","isLoading","error","queryKey","id","queryFn","getBookingsByCustomer","Promise","resolve","enabled","staleTime","className","children","message","size","length","map","booking","_booking$slot","_booking$slot$provide","_booking$slot2","_booking$slot3","slot","provider","name","Date","start_time","toLocaleDateString","toLocaleTimeString","hour","minute","status","onClick"],"sources":["/Users/yash/Desktop/urban booking/frontend/src/pages/MyBookingsPage.tsx"],"sourcesContent":["import React from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useQuery } from '@tanstack/react-query';\nimport { apiService } from '../services/api';\nimport { LoadingSpinner } from '../components/LoadingSpinner';\nimport { ErrorMessage } from '../components/ErrorMessage';\nimport { Booking } from '../types';\nimport { useNavigate } from 'react-router-dom';\n\nexport const MyBookingsPage: React.FC = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n\n  const { data: bookings, isLoading, error } = useQuery({\n    queryKey: ['my-bookings', user?.id],\n    queryFn: () => user ? apiService.getBookingsByCustomer(user.id) : Promise.resolve([]),\n    enabled: !!user?.id,\n    staleTime: 2 * 60 * 1000,\n  });\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <ErrorMessage message=\"Please log in to view your bookings.\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">My Bookings</h1>\n        {isLoading ? (\n          <LoadingSpinner size=\"lg\" className=\"py-8\" />\n        ) : error ? (\n          <ErrorMessage message=\"Failed to load bookings. Please try again.\" />\n        ) : bookings && bookings.length > 0 ? (\n          <div className=\"space-y-4\">\n            {bookings.map((booking: Booking) => (\n              <div key={booking.id} className=\"card flex flex-col md:flex-row md:items-center md:justify-between p-4\">\n                <div>\n                  <div className=\"font-semibold text-gray-900 mb-1\">\n                    {booking.slot?.provider?.name || 'Provider'} â€” {new Date(booking.slot?.start_time || '').toLocaleDateString()} {new Date(booking.slot?.start_time || '').toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">\n                    Status: <span className=\"capitalize\">{booking.status}</span>\n                  </div>\n                </div>\n                <button\n                  className=\"btn-primary mt-2 md:mt-0\"\n                  onClick={() => navigate(`/booking/${booking.id}`)}\n                >\n                  Review\n                </button>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-8 text-gray-500\">\n            You have no bookings yet.\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,yBAAyB,CACjD,OAASC,QAAQ,KAAQ,uBAAuB,CAChD,OAASC,UAAU,KAAQ,iBAAiB,CAC5C,OAASC,cAAc,KAAQ,8BAA8B,CAC7D,OAASC,YAAY,KAAQ,4BAA4B,CAEzD,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,MAAO,MAAM,CAAAC,cAAwB,CAAGA,CAAA,GAAM,CAC5C,KAAM,CAAEC,IAAK,CAAC,CAAGX,OAAO,CAAC,CAAC,CAC1B,KAAM,CAAAY,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAEQ,IAAI,CAAEC,QAAQ,CAAEC,SAAS,CAAEC,KAAM,CAAC,CAAGf,QAAQ,CAAC,CACpDgB,QAAQ,CAAE,CAAC,aAAa,CAAEN,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEO,EAAE,CAAC,CACnCC,OAAO,CAAEA,CAAA,GAAMR,IAAI,CAAGT,UAAU,CAACkB,qBAAqB,CAACT,IAAI,CAACO,EAAE,CAAC,CAAGG,OAAO,CAACC,OAAO,CAAC,EAAE,CAAC,CACrFC,OAAO,CAAE,CAAC,EAACZ,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEO,EAAE,EACnBM,SAAS,CAAE,CAAC,CAAG,EAAE,CAAG,IACtB,CAAC,CAAC,CAEF,GAAI,CAACb,IAAI,CAAE,CACT,mBACEJ,IAAA,QAAKkB,SAAS,CAAC,+CAA+C,CAAAC,QAAA,cAC5DnB,IAAA,CAACH,YAAY,EAACuB,OAAO,CAAC,sCAAsC,CAAE,CAAC,CAC5D,CAAC,CAEV,CAEA,mBACEpB,IAAA,QAAKkB,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC3CjB,KAAA,QAAKgB,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDnB,IAAA,OAAIkB,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,CACrEX,SAAS,cACRR,IAAA,CAACJ,cAAc,EAACyB,IAAI,CAAC,IAAI,CAACH,SAAS,CAAC,MAAM,CAAE,CAAC,CAC3CT,KAAK,cACPT,IAAA,CAACH,YAAY,EAACuB,OAAO,CAAC,4CAA4C,CAAE,CAAC,CACnEb,QAAQ,EAAIA,QAAQ,CAACe,MAAM,CAAG,CAAC,cACjCtB,IAAA,QAAKkB,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBZ,QAAQ,CAACgB,GAAG,CAAEC,OAAgB,OAAAC,aAAA,CAAAC,qBAAA,CAAAC,cAAA,CAAAC,cAAA,oBAC7B1B,KAAA,QAAsBgB,SAAS,CAAC,uEAAuE,CAAAC,QAAA,eACrGjB,KAAA,QAAAiB,QAAA,eACEjB,KAAA,QAAKgB,SAAS,CAAC,kCAAkC,CAAAC,QAAA,EAC9C,EAAAM,aAAA,CAAAD,OAAO,CAACK,IAAI,UAAAJ,aAAA,kBAAAC,qBAAA,CAAZD,aAAA,CAAcK,QAAQ,UAAAJ,qBAAA,iBAAtBA,qBAAA,CAAwBK,IAAI,GAAI,UAAU,CAAC,UAAG,CAAC,GAAI,CAAAC,IAAI,CAAC,EAAAL,cAAA,CAAAH,OAAO,CAACK,IAAI,UAAAF,cAAA,iBAAZA,cAAA,CAAcM,UAAU,GAAI,EAAE,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAC,GAAC,CAAC,GAAI,CAAAF,IAAI,CAAC,EAAAJ,cAAA,CAAAJ,OAAO,CAACK,IAAI,UAAAD,cAAA,iBAAZA,cAAA,CAAcK,UAAU,GAAI,EAAE,CAAC,CAACE,kBAAkB,CAAC,EAAE,CAAE,CAAEC,IAAI,CAAE,SAAS,CAAEC,MAAM,CAAE,SAAU,CAAC,CAAC,EACpN,CAAC,cACNnC,KAAA,QAAKgB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,UAC7B,cAAAnB,IAAA,SAAMkB,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAEK,OAAO,CAACc,MAAM,CAAO,CAAC,EACzD,CAAC,EACH,CAAC,cACNtC,IAAA,WACEkB,SAAS,CAAC,0BAA0B,CACpCqB,OAAO,CAAEA,CAAA,GAAMlC,QAAQ,CAAC,YAAYmB,OAAO,CAACb,EAAE,EAAE,CAAE,CAAAQ,QAAA,CACnD,QAED,CAAQ,CAAC,GAdDK,OAAO,CAACb,EAeb,CAAC,EACP,CAAC,CACC,CAAC,cAENX,IAAA,QAAKkB,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,2BAEhD,CAAK,CACN,EACE,CAAC,CACH,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}